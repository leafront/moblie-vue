{"remainingRequest":"/Users/shanliguo/Documents/wm-mobile/mobile-vue/node_modules/babel-loader/lib/index.js!/Users/shanliguo/Documents/wm-mobile/mobile-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/shanliguo/Documents/wm-mobile/mobile-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shanliguo/Documents/wm-mobile/mobile-vue/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shanliguo/Documents/wm-mobile/mobile-vue/src/App.vue","mtime":1554960393306},{"path":"/Users/shanliguo/Documents/wm-mobile/mobile-vue/node_modules/cache-loader/dist/cjs.js","mtime":1551093967131},{"path":"/Users/shanliguo/Documents/wm-mobile/mobile-vue/node_modules/babel-loader/lib/index.js","mtime":1551093966843},{"path":"/Users/shanliguo/Documents/wm-mobile/mobile-vue/node_modules/cache-loader/dist/cjs.js","mtime":1551093967131},{"path":"/Users/shanliguo/Documents/wm-mobile/mobile-vue/node_modules/vue-loader/lib/index.js","mtime":1551093973497},{"path":"/Users/shanliguo/Documents/wm-mobile/mobile-vue/node_modules/cache-loader/dist/cjs.js","mtime":1551093967131},{"path":"/Users/shanliguo/Documents/wm-mobile/mobile-vue/node_modules/babel-loader/lib/index.js","mtime":1551093966843},{"path":"/Users/shanliguo/Documents/wm-mobile/mobile-vue/node_modules/cache-loader/dist/cjs.js","mtime":1551093967131},{"path":"/Users/shanliguo/Documents/wm-mobile/mobile-vue/node_modules/vue-loader/lib/index.js","mtime":1551093973497}],"contextDependencies":[],"result":["import \"vant/es/dialog/style\";\nimport _Dialog from \"vant/es/dialog\";\nexport default {\n  components: {\n    Dialog: _Dialog\n  },\n  created: function created() {\n    this.userStatus();\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    window.onpopstate = function () {\n      if (!_this2.$store.state.allowBack) {\n        history.go(1);\n      }\n    };\n  },\n  methods: {\n    userStatus: function userStatus() {\n      if (this.$route) {\n        if (this.$route.name !== 'login') {\n          var _this = this;\n\n          setInterval(function () {\n            _this.userFetch();\n          }, 60000);\n        } else {}\n      }\n    },\n    userFetch: function userFetch() {\n      var _this3 = this;\n\n      this.$store.dispatch('userInfo', this).then(function () {\n        if (_this3.$store.state.userFetching === true) {\n          var data = _this3.$store.state.userInfo;\n\n          if (data !== null && data !== '' && data !== {} && data.data !== {}) {\n            if (data.data && data.data.timeout) {\n              _Dialog.confirm({\n                message: '登录信息已失效，请重新登录?',\n                showCancelButton: false\n              }).then(function () {\n                // 超时\n                if (localStorage.getItem('userName_current')) {\n                  localStorage.setItem('userName_current', '');\n                }\n\n                if (localStorage.getItem('departName_current')) {\n                  localStorage.setItem('departName_current', '');\n                }\n\n                _this3.$router.push({\n                  name: 'login'\n                });\n              }).catch(function () {});\n            } else {}\n          } else {\n            // 没有data\n            if (localStorage.getItem('userName_current')) {\n              localStorage.setItem('userName_current', '');\n            }\n\n            if (localStorage.getItem('departName_current')) {\n              localStorage.setItem('departName_current', '');\n            }\n\n            _this3.$router.push({\n              name: 'login'\n            });\n          }\n        } else {\n          //接口不通\n          if (localStorage.getItem('userName_current')) {\n            localStorage.setItem('userName_current', '');\n          }\n\n          if (localStorage.getItem('departName_current')) {\n            localStorage.setItem('departName_current', '');\n          }\n\n          _this3.$router.push({\n            name: 'login'\n          });\n        }\n      }).catch(function (err) {\n        console.log(err); // if (localStorage.getItem('userName_current')) {\n        //     localStorage.setItem('userName_current', '');\n        // }\n        // if (localStorage.getItem('departName_current')) {\n        //     localStorage.setItem('departName_current', '');\n        // }\n        //\n        // this.$router.push({\n        //     name: 'login'\n        // });\n      });\n    }\n  }\n};",{"version":3,"sources":["App.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div id=\"app\">\n        <router-view/>\n    </div>\n</template>\n\n<script>\n    import {\n        Dialog,\n    } from 'vant';\n\n    export default {\n        components: {\n            Dialog: Dialog,\n        },\n        created() {\n            this.userStatus();\n        },\n        mounted() {\n            window.onpopstate = () => {\n                if (!this.$store.state.allowBack) {\n                    history.go(1);\n                }\n            }\n        },\n        methods: {\n            userStatus() {\n\n                if (this.$route) {\n                    if (this.$route.name !== 'login') {\n                        let _this = this;\n                        setInterval(function () {\n                            _this.userFetch();\n                        }, 60000);\n                    } else {\n                    }\n                }\n            },\n            userFetch() {\n                this.$store.dispatch('userInfo', this).then(() => {\n                    if (this.$store.state.userFetching === true) {\n                        const data = this.$store.state.userInfo;\n\n                        if (data !== null && data !== '' && data !== {} && data.data !== {}) {\n                            if (data.data && data.data.timeout) {\n\n                                Dialog.confirm({\n                                    message: '登录信息已失效，请重新登录?',\n                                    showCancelButton: false\n                                }).then(() => {\n                                    // 超时\n                                    if (localStorage.getItem('userName_current')) {\n                                        localStorage.setItem('userName_current', '');\n                                    }\n                                    if (localStorage.getItem('departName_current')) {\n                                        localStorage.setItem('departName_current', '');\n                                    }\n\n                                    this.$router.push({\n                                        name: 'login'\n                                    });\n                                }).catch(() => {\n                                });\n\n                            } else {\n                            }\n                        } else {\n                            // 没有data\n                            if (localStorage.getItem('userName_current')) {\n                                localStorage.setItem('userName_current', '');\n                            }\n                            if (localStorage.getItem('departName_current')) {\n                                localStorage.setItem('departName_current', '');\n                            }\n\n                            this.$router.push({\n                                name: 'login'\n                            });\n                        }\n                    } else {\n                        //接口不通\n                        if (localStorage.getItem('userName_current')) {\n                            localStorage.setItem('userName_current', '');\n                        }\n                        if (localStorage.getItem('departName_current')) {\n                            localStorage.setItem('departName_current', '');\n                        }\n\n                        this.$router.push({\n                            name: 'login'\n                        });\n                    }\n                }).catch((err) => {\n                    console.log(err);\n                    // if (localStorage.getItem('userName_current')) {\n                    //     localStorage.setItem('userName_current', '');\n                    // }\n                    // if (localStorage.getItem('departName_current')) {\n                    //     localStorage.setItem('departName_current', '');\n                    // }\n                    //\n                    // this.$router.push({\n                    //     name: 'login'\n                    // });\n                });\n            },\n        }\n    }\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":"src"}]}